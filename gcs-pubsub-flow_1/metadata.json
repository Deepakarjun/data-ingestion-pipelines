{
  "name": "GCS (Streaming) â†’ Pub/Sub with Validations",
  "description": "Continuously watches GCS for new JSON files, validates file naming/extension and JSON schema, writes invalids to GCS, transforms and publishes valid records to Pub/Sub, and moves files.",
  "parameters": [
    {
      "name": "input_bucket",
      "label": "Input GCS Folder",
      "helpText": "Example: gs://MY_BUCKET/path_without_trailing_slash"
    },
    {
      "name": "output_topic",
      "label": "Output Pub/Sub Topic",
      "helpText": "Example: projects/PROJECT_ID/topics/TOPIC_NAME",
      "regexes": ["projects/.*/topics/.*"]
    },
    {
      "name": "interval_sec",
      "label": "Polling Interval (seconds)",
      "helpText": "How often to poll GCS for new files (default 60s)"
    },
    {
      "name": "expected_date_yyyymmdd",
      "label": "Required Date in Filename (YYYYMMDD)",
      "helpText": "If set, only files named data_YYYYMMDD.json with this date pass validation"
    },
    {
      "name": "required_keys",
      "label": "Required schema keys (comma-separated)",
      "helpText": "Defaults to id,name,timestamp"
    }
  ]
}
